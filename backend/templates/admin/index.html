{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}Administration TECHSTORE{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* Header compact horizontal */
    .dash-header {
        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        border-radius: 12px;
        padding: 16px 24px;
        margin-bottom: 16px;
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .dash-header h2 { margin: 0; font-size: 20px; font-weight: 600; }
    .dash-header p { margin: 0; opacity: 0.9; font-size: 14px; }
    
    /* Actions en ligne horizontale */
    .quick-row {
        display: flex;
        gap: 12px;
        margin-bottom: 16px;
        flex-wrap: wrap;
    }
    .quick-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 10px 16px;
        text-decoration: none;
        color: #374151;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.15s;
    }
    .quick-btn:hover {
        border-color: #4f46e5;
        background: #f5f3ff;
        color: #4f46e5;
    }
    .quick-btn i { font-size: 16px; }
    
    /* Guide en une ligne */
    .guide-inline {
        background: #ecfdf5;
        border-radius: 8px;
        padding: 12px 16px;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 24px;
        flex-wrap: wrap;
        font-size: 13px;
        color: #047857;
    }
    .guide-inline i { color: #10b981; }
    .guide-inline span { display: flex; align-items: center; gap: 6px; }
    
    /* Grille apps horizontale */
    .apps-row {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
    }
    .app-box {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        flex: 1;
        min-width: 280px;
        max-width: 400px;
    }
    .app-box-head {
        background: #f8fafc;
        padding: 10px 14px;
        border-bottom: 1px solid #e5e7eb;
        font-weight: 600;
        font-size: 14px;
        color: #1f2937;
    }
    .app-box-head i { color: #4f46e5; margin-right: 6px; }
    .model-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 14px;
        border-bottom: 1px solid #f3f4f6;
    }
    .model-row:last-child { border-bottom: none; }
    .model-row a.m-link {
        color: #374151;
        text-decoration: none;
        font-size: 13px;
    }
    .model-row a.m-link:hover { color: #4f46e5; }
    .model-row .add-sm {
        background: #10b981;
        color: white;
        padding: 4px 10px;
        border-radius: 4px;
        font-size: 11px;
        text-decoration: none;
    }
    .model-row .add-sm:hover { background: #059669; }
</style>
{% endblock %}

{% block content %}
<!-- Header compact -->
<div class="dash-header">
    <div>
        <h2><i class="fas fa-store"></i> TECHSTORE Admin</h2>
    </div>
    <p>Bonjour {{ request.user.username }} !</p>
</div>

<!-- Actions rapides en ligne -->
<div class="quick-row">
    <a href="/admin/produits/product/add/" class="quick-btn">
        <i class="fas fa-plus" style="color: #4f46e5;"></i> Nouveau produit
    </a>
    <a href="/admin/orders/order/?status__exact=pending" class="quick-btn">
        <i class="fas fa-clock" style="color: #f59e0b;"></i> Commandes en attente
    </a>
    <a href="/admin/produits/product/?stock__lte=5" class="quick-btn">
        <i class="fas fa-exclamation-circle" style="color: #ef4444;"></i> Stock faible
    </a>
    <a href="/admin/home/banner/" class="quick-btn">
        <i class="fas fa-image" style="color: #8b5cf6;"></i> Bannieres
    </a>
    <a href="/admin/home/announcement/" class="quick-btn">
        <i class="fas fa-bullhorn" style="color: #10b981;"></i> Annonces
    </a>
    <a href="/admin/orders/order/" class="quick-btn">
        <i class="fas fa-list" style="color: #6b7280;"></i> Toutes les commandes
    </a>
</div>

<!-- Guide compact -->
<div class="guide-inline">
    <span><i class="fas fa-lightbulb"></i> <strong>Astuce:</strong></span>
    <span>1. Ajoutez des produits</span>
    <span>2. Gerez les commandes</span>
    <span>3. Activez les promotions</span>
</div>

<!-- Apps en grille horizontale -->
<div class="apps-row">
{% if app_list %}
    {% for app in app_list %}
    <div class="app-box">
        <div class="app-box-head"><i class="fas fa-folder"></i> {{ app.name }}</div>
        {% for model in app.models %}
        <div class="model-row">
            {% if model.admin_url %}
            <a href="{{ model.admin_url }}" class="m-link">{{ model.name }}</a>
            {% else %}
            <span>{{ model.name }}</span>
            {% endif %}
            {% if model.add_url %}
            <a href="{{ model.add_url }}" class="add-sm">+ Ajouter</a>
            {% endif %}
        </div>
        {% endfor %}
    </div>
    {% endfor %}
{% else %}
    <p>{% trans "You don't have permission to view or edit anything." %}</p>
{% endif %}
</div>
{% endblock %}
